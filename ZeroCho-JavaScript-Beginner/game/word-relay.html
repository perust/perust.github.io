<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <title>ëë§ì‡ê¸°</title>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <style>
      @font-face {
        font-family: 'KyoboHand';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@1.0/KyoboHand.woff')
          format('woff');
        font-weight: normal;
        font-style: normal;
      }

      body {
        font-family: 'KyoboHand', sans-serif;
      }

      input {
        -ms-ime-mode: active;
      }

      .container {
        padding-bottom: 100px;
      }

      .container h1 {
        border-bottom: 1px solid #ddd;
        padding: 80px 0 10px;
        margin-bottom: 30px;
      }

      #ready-container .description {
        font-size: 14px;
      }

      #ready-container .limit-box {
        padding-bottom: 40px;
      }

      #ready-container .limit-box .description {
        padding-top: 10px;
      }

      #ready-container .rule-box {
        border: 1px solid #ddd;
        margin: 30px 0;
        padding: 20px 0;
      }

      #ready-container .rule-box h4 {
        padding-bottom: 10px;
      }

      #ready-container ol {
        width: max-content;
        margin: 0 auto;
      }

      #game-container .description {
        font-size: 14px;
      }

      #game-container #word {
        border: 1px solid #ddd;
        text-align: center;
        padding: 10px 4px;
        font-weight: 600;
        font-size: 32px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="py-5">ğŸ¤”ğŸ¤” ëë§ì‡ê¸° ğŸ•¶</h1>
      <div id="ready-container" class="text-center">
        <p class="description">
          ëë§ì‡ê¸° : ì—¬ëŸ¬ ì‚¬ëŒì´ í•˜ëŠ” ë§ë†€ì´ì˜ í•˜ë‚˜. í•œ ì‚¬ëŒì´ ë¨¼ì € í•œ ë‚±ë§ì„
          ë§í•˜ë©´ ë‹¤ìŒ ì‚¬ëŒì´ ê·¸ ë§ì˜ ë ìŒì ˆì„ ì²«ì†Œë¦¬ë¡œ í•˜ëŠ” ë‚±ë§ì„ ë§í•˜ëŠ”
          ì‹ìœ¼ë¡œ ë‹¤ìŒ ì‚¬ëŒìœ¼ë¡œ ê³„ì† ì´ì–´ ê°€ëŠ” ë†€ì´. ì˜ˆë¥¼ ë“¤ì–´,
          `ì¥ë¯¸-ë¯¸ì¸-ì¸ê°„ì„±-ì„±ì¥â€¦'ê³¼ ê°™ì´ ì´ì–´ ê°€ëŠ” ê²ƒ.
        </p>
        <div class="row limit-box">
          <div class="col-12"><h4>ê¸€ì ìˆ˜ ì œí•œ</h4></div>
          <div class="col-3">
            <button
              type="button"
              id="limit-btn-non"
              class="btn btn-primary w-100 h-100"
            >
              ë¬´ì œí•œ
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              id="limit-btn-two"
              class="btn btn-outline-secondary w-100 h-100"
            >
              2 ì
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              id="limit-btn-three"
              class="btn btn-outline-secondary w-100 h-100"
            >
              3 ì
            </button>
          </div>
          <div class="col-3">
            <button
              type="button"
              id="limit-btn-four"
              class="btn btn-outline-secondary w-100 h-100"
            >
              4 ì
            </button>
          </div>
          <div id="limit-description" class="col-12 description">
            ê¸€ììˆ˜ì— ì œí•œì´ ì—†ì–´ìš”.
          </div>
        </div>
        <button
          id="start-button"
          type="button"
          class="btn btn-primary w-100 h-100 btn-lg"
        >
          ì‹œì‘!
        </button>
        <div class="rule-box">
          <h4>ğŸ“Œê·œì¹™</h4>
          <ol>
            <li>
              ì œì‹œëœ ë‹¨ì–´ì˜ ë§ˆì§€ë§‰ ê¸€ìì™€ <br />
              ì…ë ¥í•˜ëŠ” ë‹¨ì–´ì˜ ì²« ê¸€ìëŠ” <br />
              ì™„ì „íˆ ê°™ì•„ì•¼ í•´ìš”. (ë¦¬ -> ì´ âŒ)
            </li>
            <li>í•œë²ˆ ì¼ë˜ ë‹¨ì–´ëŠ” ì“°ë©´ ì•ˆë¼ìš”.</li>
          </ol>
        </div>
      </div>
      <div id="game-container" class="d-none">
        <div class="row">
          <div class="col-12">
            <h2 class="py-3"><span id="order">1</span>ë²ˆì§¸ ì°¸ê°€ì</h2>
          </div>
          <div class="col-xs-12 col-sm-8">
            <h6 for="suggestion-input" class="form-label">
              ì œì‹œì–´
              <h4 id="word"></h4>
            </h6>
            <input
              type="text"
              class="form-control my-2"
              id="suggestion-input"
              placeholder="ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
              pattern="/^[ê°€-í£]+$/"
            />
          </div>
          <div class="col-xs-12 col-sm-4">
            <button
              id="input-button"
              type="button"
              class="btn btn-primary w-100 h-100"
            >
              ì…ë ¥
            </button>
          </div>
        </div>
        <p class="description">í•œê¸€ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
      </div>
      <div id="result-container" class="d-none">
        <h3 id="result-header">ê²°ê³¼ í˜ì´ì§€</h3>
        <button
          id="result-button"
          type="button"
          class="btn btn-primary w-100 h-100"
        >
          ë‹¤ì‹œ í•œ ë²ˆ
        </button>
        <div id="result-container__log-box">
          <h4 class="py-3">íˆ¬ë‹¥íˆ¬ë‹¥ í”ì ğŸ“ƒ</h4>
        </div>
        <p style="padding-top: 100px"></p>
      </div>
    </div>
    <script>
      const $button = document.querySelector('#input-button');
      const $start = document.querySelector('#start-button');
      const $result = document.querySelector('#result-button');
      const $input = document.querySelector('input');
      const $word = document.querySelector('#word');
      const $order = document.querySelector('#order');
      const btnLimitNon = document.querySelector('#limit-btn-non');
      const btnLimitTwo = document.querySelector('#limit-btn-two');
      const btnLimitThree = document.querySelector('#limit-btn-three');
      const btnLimitFour = document.querySelector('#limit-btn-four');
      const checkWord = /[a-z0-9]|[ \[\]{}()<>?|`~!@#$%^&*-_+=,.;:\"'\\]|/g;
      const checkKor = /^[ê°€-í£]+$/;
      const checkNum = /^[0-9]+$/;
      let limitWord = '';
      let number = '';
      let word = ''; // ì œì‹œì–´
      let newWord; // ìƒˆë¡œ ì…ë ¥í•œ ë‹¨ì–´
      let alreadyWord = [];

      $start.focus();

      const resetDate = () => {
        number = '';
        word = ''; // ì œì‹œì–´
        newWord = ''; // ìƒˆë¡œ ì…ë ¥í•œ ë‹¨ì–´
        alreadyWord = [];
        $word.textContent = word;
      };

      const onLimitNon = () => {
        btnLimitNon.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitTwo.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitThree.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitFour.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.add('btn-primary');
        btnLimitTwo.classList.add('btn-outline-secondary');
        btnLimitThree.classList.add('btn-outline-secondary');
        btnLimitFour.classList.add('btn-outline-secondary');
        limitWord = '';
        document.getElementById('limit-description').innerText =
          limitWord + 'ê¸€ììˆ˜ì— ì œí•œì´ ì—†ì–´ìš”.';
        console.log('btnLimitTwo', btnLimitTwo);
        console.log('limitWord', limitWord);
      };
      const onLimitTwo = () => {
        btnLimitTwo.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitThree.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitFour.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.add('btn-outline-secondary');
        btnLimitTwo.classList.add('btn-primary');
        btnLimitThree.classList.add('btn-outline-secondary');
        btnLimitFour.classList.add('btn-outline-secondary');
        limitWord = 2;
        document.getElementById('limit-description').innerText =
          limitWord + ' ìë¡œ ëœ ë‹¨ì–´ë§Œ ì“¸ ìˆ˜ ìˆì–´ìš”';
        console.log('btnLimitTwo', btnLimitTwo);
        console.log('limitWord', limitWord);
      };
      const onLimitThree = () => {
        btnLimitThree.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitTwo.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitFour.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.add('btn-outline-secondary');
        btnLimitTwo.classList.add('btn-outline-secondary');
        btnLimitThree.classList.add('btn-primary');
        btnLimitFour.classList.add('btn-outline-secondary');
        limitWord = 3;
        document.getElementById('limit-description').innerText =
          limitWord + ' ìë¡œ ëœ ë‹¨ì–´ë§Œ ì“¸ ìˆ˜ ìˆì–´ìš”';
        console.log('btnLimitTwo', btnLimitTwo);
        console.log('limitWord', limitWord);
      };
      const onLimitFour = () => {
        btnLimitFour.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitTwo.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitThree.classList.remove('btn-primary', 'btn-outline-secondary');
        btnLimitNon.classList.add('btn-outline-secondary');
        btnLimitTwo.classList.add('btn-outline-secondary');
        btnLimitThree.classList.add('btn-outline-secondary');
        btnLimitFour.classList.add('btn-primary');
        limitWord = 4;
        document.getElementById('limit-description').innerText =
          limitWord + ' ìë¡œ ëœ ë‹¨ì–´ë§Œ ì“¸ ìˆ˜ ìˆì–´ìš”';
        console.log('btnLimitTwo', btnLimitTwo);
        console.log('limitWord', limitWord);
      };

      const onStartButton = () => {
        number = Number(prompt('ëª‡ ëª…ì´ ì°¸ê°€í•˜ì„¸ìš”?'));
        if (isNaN(number)) {
          alert('ğŸ˜­ ìˆ«ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”');
        } else if (!number) {
          return 0;
        } else if (checkNum.test(number)) {
          document.getElementById('ready-container').classList.add('d-none');
          document.getElementById('game-container').classList.remove('d-none');
          resetDate();
          $input.focus();
        } else {
          onStartButton();
        }
      };

      const onReplayButton = () => {
        resetDate();
        document.getElementById('result-container').classList.add('d-none');
        document.getElementById('ready-container').classList.remove('d-none');
        $start.focus();
      };

      const onClickButton = () => {
        // ì œì‹œì–´ê°€ ë¹„ì–´ìˆëŠ”ê°€?
        console.log('newWord', newWord);
        console.log('alreadyWord', alreadyWord);
        if (!newWord) {
          alert('ë‹¨ì–´ë¥¼ ì ì–´ì£¼ì„¸ìš”.');
        } else if (!checkKor.test(newWord)) {
          alert('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë‹¨ì–´ì˜ˆìš”.');
        } else if (newWord.length !== limitWord && limitWord !== '') {
          alert('ê¸€ì ìˆ˜ê°€ ' + limitWord + ' ìê°€ ì•„ë‹ˆì˜ˆìš”.');
        } else if (alreadyWord.indexOf(newWord) !== -1) {
          const order = Number($order.textContent); // í˜„ì¬ ìˆœì„œ
          alert(
            'ëë§ì‡ê¸° ì‹¤íŒ¨!\n' +
              'ì´ë¯¸ ì¼ë˜ ë‹¨ì–´ì˜ˆìš”ğŸ˜­\n' +
              order +
              'ë²ˆì§¸ ì°¸ê°€ìê°€ ì¡Œì–´ìš”!'
          );
          //ì¡Œì„ë•Œ ì‹œë‚˜ë¦¬ì˜¤
          document.querySelector('#result-header').innerHTML =
            'ğŸ˜¥' + order + 'ë²ˆ ì°¸ê°€ìê°€ ì¡Œì–´ìš”.';

          let new_log_line = document.createElement('p');
          new_log_line.innerHTML = 'ğŸ§¨' + order + 'ë²ˆ ì°¸ê°€ì : ' + newWord;
          document
            .querySelector('#result-container__log-box')
            .appendChild(new_log_line);
          console.log('new_log_line', new_log_line);

          document.getElementById('game-container').classList.add('d-none');
          document
            .getElementById('result-container')
            .classList.remove('d-none');

          $start.focus();
        } else if (!word || word[word.length - 1] === newWord[0]) {
          // ì œì‹œì–´ê°€ ë¹„ì–´ìˆìŒ OR ëê¸€ìì™€ ì²«ê¸€ìê°€ ê°™ìŒ
          word = newWord; // ì…ë ¥í•œ ë‹¨ì–´ê°€ ì œì‹œì–´ê°€ ëœë‹¤.
          $word.textContent = word;
          alreadyWord.push(word);
          console.log(alreadyWord);
          newWord = '';
          const order = Number($order.textContent); // í˜„ì¬ ìˆœì„œ

          let new_log_line = document.createElement('p');
          new_log_line.innerHTML = order + 'ë²ˆ ì°¸ê°€ì : ' + word;
          document
            .querySelector('#result-container__log-box')
            .appendChild(new_log_line);
          console.log('new_log_line', new_log_line);

          if (order + 1 > number) {
            $order.textContent = 1;
          } else {
            $order.textContent = order + 1;
          }
        } else if (word && word[word.length - 1] !== newWord[0]) {
          const order = Number($order.textContent);
          alert('ëë§ì‡ê¸° ì‹¤íŒ¨!\n' + order + 'ë²ˆì§¸ ì°¸ê°€ìê°€ ì¡Œì–´ìš”!');

          //ì¡Œì„ë•Œ ì‹œë‚˜ë¦¬ì˜¤
          document.querySelector('#result-header').innerHTML =
            'ğŸ˜¥' + order + 'ë²ˆ ì°¸ê°€ìê°€ ì¡Œì–´ìš”.';

          let new_log_line = document.createElement('p');
          new_log_line.innerHTML = 'ğŸ§¨' + order + 'ë²ˆ ì°¸ê°€ì : ' + newWord;
          document
            .querySelector('#result-container__log-box')
            .appendChild(new_log_line);
          console.log('new_log_line', new_log_line);

          document.getElementById('game-container').classList.add('d-none');
          document
            .getElementById('result-container')
            .classList.remove('d-none');

          $start.focus();
        } else {
          alert('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë‹¨ì–´ì˜ˆìš”.');
        }
        $input.value = '';
        $input.focus();
      };

      const onInput = (event) => {
        newWord = event.target.value.replace(/(\s*)/g, '');
        newWord = event.target.value.replace(checkWord, '');
        $input.value = newWord;
      };

      const inputEnter = (pressValue) => {
        if (pressValue.key == 'Enter') {
          let inputValue = $input.value;
          onClickButton();
        }
      };

      btnLimitNon.addEventListener('click', onLimitNon);
      btnLimitTwo.addEventListener('click', onLimitTwo);
      btnLimitThree.addEventListener('click', onLimitThree);
      btnLimitFour.addEventListener('click', onLimitFour);
      $start.addEventListener('click', onStartButton);
      $button.addEventListener('click', onClickButton);
      $result.addEventListener('click', onReplayButton);
      $input.addEventListener('input', onInput);
      $input.addEventListener('keypress', inputEnter);
    </script>
  </body>
</html>
